<template>
  <div class="wrapperz" v-if="props.isVisible">
    <!-- wrapper for image navigator and image displayer -->
    <div
      style="width: 100%; height: 100%; top: 0px; left: 0px; position: absolute"
    >
      <!-- image navigator -->
      <div
        style="
          display: inline-block;
          width: 20%;
          height: 100%;
          background-color: #121212;
          box-sizing: border-box;
          box-shadow: 30px 30px 12px solid rgba(0, 0, 0, 0.4);
          overflow: scroll;
          padding: 20px;
        "
      >
        <img
          v-for="(image, index) of props.images"
          :src="image.img"
          alt=""
          style="
            width: 100%;
            height: auto;
            margin-bottom: 20px;
            cursor: pointer;
          "
          @click="changeIndex(index)"
        />
      </div>

      <!-- image displayer -->
      <div
        style="
          display: inline-block;
          width: 80%;
          height: 100%;
          box-sizing: border-box;
          overflow: scroll;
          padding: 20px;
        "
      >
        <img
          :src="props.images[props.activeIndex].img"
          alt=""
          style="width: 100%; height: auto"
        />
      </div>
    </div>
    <!-- wrapper for x button wrapper -->
    <div
      style="
        position: absolute;
        width: 50px;
        height: 50px;
        top: 0px;
        right: 0px;
        z-index: 102;
      "
    >
      <!-- wrapper for (X) button -->
      <div
        style="
          position: relative;
          cursor: pointer;
          width: 50px;
          height: 50px;
          border-radius: 50%;
        "
        @click="close"
      >
        <!-- the (x) button it self -->
        <div
          style="
            position: absolute;
            top: 50%;
            margin-top: -5px;
            border: 3px solid rgba(255, 0, 0, 1);
            width: 80%;
            box-sizing: border-box;
            z-index: 103;
            transform: rotate(-45deg);
          "
        ></div>
        <div
          style="
            position: absolute;
            top: 50%;
            margin-top: -5px;
            border: 3px solid rgba(255, 0, 0, 1);
            width: 80%;
            box-sizing: border-box;
            z-index: 104;
            transform: rotate(45deg);
          "
        ></div>
      </div>
    </div>
  </div>
</template>

<script setup>
const props = defineProps(["isVisible", "images", "activeIndex"]);
const emit = defineEmits(["close-event", "change-event"]);

function close() {
  emit("close-event");
}

function changeIndex(index) {
  emit("change-event", index);
}
</script>

<style scoped>
.wrapperz {
  position: fixed;
  top: 0px;
  left: 0px;
  background-color: #242424;
  width: 100%;
  height: 100%;
  z-index: 100000;
  opacity: 0;
  -webkit-animation: images-entry 1s linear alternate both;
  animation: images-entry 0.5s linear alternate both;
}
@keyframes images-entry {
  0% {
    opacity: 0;
  }
  100% {
    opacity: 1;
  }
}

@-webkit-keyframes images-entry {
  0% {
    opacity: 0;
  }
  100% {
    opacity: 1;
  }
}
</style>
